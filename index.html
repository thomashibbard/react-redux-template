<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>react boilerplate</title>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.css">
		<link rel="stylesheet" type="text/css" href="./dist/styles/main.css">
		<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.3/moment.js"></script>
		<script type="text/javascript" src="http://masonry.desandro.com/masonry.pkgd.js"></script>
	</head>
	<body>
		<div class="container">
			<section class="posts-detail__page-header">
				<div class="row">
					<div class="col-xs-3">
						<h4 class="">Top Interest Groups</h4>
					</div>
					<div class="col-xs-3">
						<h4>Kairos Classified Posts</h4>
					</div>
					<div class="col-xs-4">
						<div class="ni-dropdown">
							<select name="" id="study-rule-select">
								<option value="option4">All</option>
								<option value="option1">1283746187324681723</option>
								<option value="option2">9187394812394878239</option>
							</select>
						</div>
					 </div>
					 <div class="col-xs-2">
						 <div class="ni-dropdown">
							 <select name="" id="sort-posts--control">
								 <option value="NEWEST_FIRST">Newest First</option>
								 <option value="OLDEST_FIRST">Oldest First</option>
							 </select>
						 </div>
						</div>
				</div>
				<div class="row">
					<div class="col-xs-3">
						<div id="interest_type_hook"></div>
					</div>
					<div class="col-xs-9">
							<div id="posts_list_hook" class="grid posts-container"></div>
					</div>
				</div>
			</section>
			<section id="posts_detail_hook"></section>
		</div>

		<script id="pagination_tmpl" type="text/template">
			<div class="pagination__container">
				<div class="pagination__control--prev">&gt;</div>
				<%var i = 0;while(i < paginationData.numPages){%>
					<div class="pagination__control--indexed"><%=index%> asdf</div>
				<%});%>
				<div class="pagination__control--next">&lt;</div>
			</div>
		</script>

		<script id="interest_type_tmpl" type="text/template">
			<div class="interest-container">
				<ul class="interest-group__list">
					<%_.each(interestTypesData, function(groupItem){%>
						<li class="interest-group__item">
							<div class="interest-group__item__container">
								<div class="interest-group__item--name">
									<strong><%=groupItem.name%></strong>
								</div>
								<div class="interest-group__item--count">
									<span><%=groupItem.count%></span>
								</div>
							</div>
							<div class="interest__item__hook"></div>
						</li>
					<%});%>
				</ul>
			</div>
		</script>


		<script type="text/template" id="interest_tmpl">
			<ul class="interest__list">
				<%_.each(interestData, function(interestItem) {%>
					<li class="interest__item" data-interest-id="<%=interestItem.id%>">
						<div class="interest__item--name">
							<span><%=interestItem.name%></span>
						</div>
						<div class="interest__item--count">
							<span><%=interestItem.count%></span>
						</div>
					</li>
				<%});%>
			</ul>
		</script>

		<script type="text/template" id="posts_list_tmpl">
			<div class="post-items__row">
				<%_.each(postsData.posts, function(listItem, listIndex, initialArray){%>
					<%postDate = moment(listItem.postDate).format('DD MMM YYYY')%>
					<div class="grid-item">
						<div class="post-item__container">
							<div class="post-item--post-content">
								<p class="post-item--post-text"><%=listItem.content%></p>
							</div>
							<div class="post-item--post-date">
								<p><%=postDate%></p>
							</div>
						</div>
					</div>
				<%});%>
			</div>
			<div class="pagination__container">
				<%console.log(postsData)%>
				<%var currentPage = postsData.pagination.currentPage,
							numPosts = postsData.pagination.numPosts,
							numPages = postsData.pagination.numPages,
							postsPerPage = postsData.pagination.postsPerPage,
							numPaginationButtons = postsData.pagination.numPaginationButtons %>

				<%if(numPosts > postsPerPage){%>
						<button class="<%=currentPage > 0 ? '' : 'disabled ' %>pagination__control--prev--all" data-page-index="0">&laquo;</button>
						<button class="<%=currentPage > 0 ? '' : 'disabled ' %>pagination__control--prev" data-page-index="<%=currentPage-1%>">&lsaquo;</button>

					<%var i = numPages - numPaginationButtons%>
					<%if(currentPage > i){%>
						<%console.log('in IF');%>
					    <%while(i < numPages){%>
					        <button class="pagination__control--indexed <%=currentPage === i ? 'active' : ''%>" data-page-index="<%=i%>"><%=i+1%></button>
					        <%i++;%>
					    <%}%>
					<%}else{%>
					    <%var c = currentPage;%>
					    <%console.log('current page', c);%>
					    <%while(c < currentPage + numPaginationButtons){%>
					        <button class="pagination__control--indexed <%=currentPage === c ? 'active' : ''%>" data-page-index="<%=c%>"><%=c+1%></button>
					        <%c++%>
					    <%}%>
					<%}%>

						<button class="<%=currentPage+1 < numPages ? '' : 'disabled '%> pagination__control--next" data-page-index="<%=currentPage+1%>">&rsaquo;</button>
						<button class="<%=currentPage+1 < numPages ? '' : 'disabled '%> pagination__control--next--all" data-page-index="<%=numPages-1%>">&raquo;</button>
				<%}%>
			</div>
		</script>



	</body>
</html>
		<script src="./dist/scripts/posts-content-bundle.js" type="text/javascript"></script>
